{"ast":null,"code":"var _jsxFileName = \"F:\\\\react\\\\JamiReact\\\\JamiReact\\\\src\\\\components\\\\Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Message from './Message';\nimport SendMessage from './SendMessage';\nimport { db } from '../firebase';\nimport { query, collection, orderBy, onSnapshot } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst style = {\n  main: `flex flex-col p-[10px]`\n};\n\nconst Chat = () => {\n  _s();\n\n  const [messages, setMessages] = useState([]);\n  const scroll = useRef();\n  useEffect(() => {\n    const q = query(collection(db, 'messages'), orderBy('timestamp'));\n    const unsubscribe = onSnapshot(q, querySnapshot => {\n      let messages = [];\n      querySnapshot.forEach(doc => {\n        messages.push({ ...doc.data(),\n          id: doc.id\n        });\n      });\n      setMessages(messages);\n    });\n    return () => unsubscribe();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: style.main,\n      children: messages && messages.map(message => /*#__PURE__*/_jsxDEV(Message, {\n        message: message\n      }, message.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SendMessage, {\n      scroll: scroll\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      ref: scroll\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Chat, \"qLF6HWpbAEbJLqWaVt1/GGbZ5Lk=\");\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Message","SendMessage","db","query","collection","orderBy","onSnapshot","style","main","Chat","messages","setMessages","scroll","q","unsubscribe","querySnapshot","forEach","doc","push","data","id","map","message"],"sources":["F:/react/JamiReact/JamiReact/src/components/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport Message from './Message';\r\nimport SendMessage from './SendMessage';\r\nimport { db } from '../firebase';\r\nimport { query, collection, orderBy, onSnapshot } from 'firebase/firestore';\r\n\r\nconst style = {\r\n  main: `flex flex-col p-[10px]`,\r\n};\r\n\r\nconst Chat = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const scroll = useRef();\r\n\r\n  useEffect(() => {\r\n    const q = query(collection(db, 'messages'), orderBy('timestamp'));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      let messages = [];\r\n      querySnapshot.forEach((doc) => {\r\n        messages.push({ ...doc.data(), id: doc.id });\r\n      });\r\n      setMessages(messages);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <main className={style.main}>\r\n        {messages &&\r\n          messages.map((message) => (\r\n            <Message key={message.id} message={message} />\r\n          ))}\r\n      </main>\r\n      {/* Send Message Compoenent */}\r\n      <SendMessage scroll={scroll} />\r\n      <span ref={scroll}></span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,EAAT,QAAmB,aAAnB;AACA,SAASC,KAAT,EAAgBC,UAAhB,EAA4BC,OAA5B,EAAqCC,UAArC,QAAuD,oBAAvD;;;AAEA,MAAMC,KAAK,GAAG;EACZC,IAAI,EAAG;AADK,CAAd;;AAIA,MAAMC,IAAI,GAAG,MAAM;EAAA;;EACjB,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAMe,MAAM,GAAGb,MAAM,EAArB;EAEAD,SAAS,CAAC,MAAM;IACd,MAAMe,CAAC,GAAGV,KAAK,CAACC,UAAU,CAACF,EAAD,EAAK,UAAL,CAAX,EAA6BG,OAAO,CAAC,WAAD,CAApC,CAAf;IACA,MAAMS,WAAW,GAAGR,UAAU,CAACO,CAAD,EAAKE,aAAD,IAAmB;MACnD,IAAIL,QAAQ,GAAG,EAAf;MACAK,aAAa,CAACC,OAAd,CAAuBC,GAAD,IAAS;QAC7BP,QAAQ,CAACQ,IAAT,CAAc,EAAE,GAAGD,GAAG,CAACE,IAAJ,EAAL;UAAiBC,EAAE,EAAEH,GAAG,CAACG;QAAzB,CAAd;MACD,CAFD;MAGAT,WAAW,CAACD,QAAD,CAAX;IACD,CAN6B,CAA9B;IAOA,OAAO,MAAMI,WAAW,EAAxB;EACD,CAVQ,EAUN,EAVM,CAAT;EAYA,oBACE;IAAA,wBACE;MAAM,SAAS,EAAEP,KAAK,CAACC,IAAvB;MAAA,UACGE,QAAQ,IACPA,QAAQ,CAACW,GAAT,CAAcC,OAAD,iBACX,QAAC,OAAD;QAA0B,OAAO,EAAEA;MAAnC,GAAcA,OAAO,CAACF,EAAtB;QAAA;QAAA;QAAA;MAAA,QADF;IAFJ;MAAA;MAAA;MAAA;IAAA,QADF,eAQE,QAAC,WAAD;MAAa,MAAM,EAAER;IAArB;MAAA;MAAA;MAAA;IAAA,QARF,eASE;MAAM,GAAG,EAAEA;IAAX;MAAA;MAAA;MAAA;IAAA,QATF;EAAA,gBADF;AAaD,CA7BD;;GAAMH,I;;KAAAA,I;AA+BN,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}